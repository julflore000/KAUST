\documentclass[12 pt]{article}
\usepackage{amsmath}

\begin{document}


\title{Simple Green Hydrogen Production}
\author{Julian Florez}
\maketitle


\section*{Sets}

\begin{tabular}{ll}
$T$ set of timesteps \textit{t} that the model will optimize for\\
$I^{EY}$ set of available EY models to build \\

\end{tabular}

\section*{Parameters}

\begin{tabular}{ll}

$d$  demand for end fuel in total simulation period \\
\\
$\theta^{W}_{t}$ capacity factor of wind energy source at timestep \textit{t} \\
$\theta^{S}_{t}$ capacity factor of solar energy source at timestep \textit{t} \\
$\theta^{HS store}$ efficiency of storing hydrogen \\
$\theta^{BS store}$ efficiency of storing energy in battery \\
$\theta^{HS deploy}$ efficiency of deploying hydrogen from storage\\
$\theta^{BS deploy}$ efficiency of deploying energy from battery \\
$\theta^{HBhydrogen}$ efficiency of hydrogen input into HB process\\
$\theta^{HBnitrogen}$ efficiency of nitrogen input into HB process\\
\\
$c^{W}$ CAPEX cost for wind technology generation \\
$c^{S}$ CAPEX cost for solar technology generation \\
$c^{EY}_{i}$ CAPEX cost for electrolysis model $i \in I^{EY}$\\
$c^{HS}$ CAPEX cost for hydrogen storage\\
$c^{BS}$ CAPEX cost for battery storage\\
$c^{ASU}$ CAPEX cost for ASU\\
$c^{HB}$ CAPEX cost of haber-bosch process (ammonia plant)\\
\\
$o^{W fixed}$ Fixed OPEX cost for wind technology generation \\
$o^{S fixed}$ Fixed OPEX cost for solar  technology generation \\
$o^{EY fixed}_{i}$ Fixed OPEX cost for EY operations in model $i \in I^{EY}$\\
$o^{HS fixed}$ Fixed OPEX cost for HS operations \\
$o^{BS fixed}$ Fixed OPEX cost for BS operations \\
$o^{ASU fixed}$ Fixed OPEX cost for ASU operations \\
$o^{HB fixed}$ Fixed OPEX cost for HB operations \\
\\
$o^{EY variable}_{i}$ Variable OPEX cost for EY operations in model $i \in I^{EY}$\\
\\
$e^{EY}_{i}$ energy usage per unit (MWh)output of H2 in EY in model $i \in I^{EY}$ (kg)\\
$e^{HS}$ energy usage per (MWh) unit output of H2 in HS (kg) \\
$e^{ASU}$ energy usage (MWh) per unit output of N2 in ASU (kg)\\
$e^{HB}$ energy usage (MWh) per unit output of NH3 in HB (kg) \\
\\
$m^{ASU}$ minimum operation of nameplate capacity for ASU\\
$m^{HB}$ minimum operation of nameplate capacity for HB\\
\\
$s^{EY}_{i}$ stack size capacity for electroyzer model $i \in I^{EY}$ (in MW)\\
\\
$n$ plant lifetime (number of years) that the plants will be in operation (often 20 or 30 years)\\
\\
$r$ discount rate on annual basis\\
\end{tabular} 


\section*{Decision Variables}
\begin{tabular}{ll}
$W^{Cap}$ total nameplate wind capacity to build (MW)\\
$S^{Cap}$ total nameplate solar capacity to build (MW)\\
$EY^{Cap}_{i}$ total number of model stacks $i \in I^{EY}$ to build (integer)\\
$BS^{Cap}$ total battery storage capacity to build (MW)\\
$HS^{Cap}$ total hydrogen storage capacity to build (kg H2 output)\\
$ASU^{Cap}$ total ASU capacity to build (kg N2 output)\\
$HB^{Cap}$ total Haber-Bosch plant capacity to build (kg NH3 output)\\
\\

$EY^{Gen}_{i,t}$ amount of H2 to produce from stacks of EY model type $i \in I^{EY}$ at timestep \textit{t} \\
$ASU^{Gen}_{t}$ amount of nitrogen to generate at timestep \textit{t} \\
$HB^{Gen}_{t}$ amount of ammonia to generate at timestep \textit{t} \\
\\
$HS^{Store}_{t}$ amount of hydrogen to store at timestep \textit{t} \\
$BS^{Store}_{t}$ amount of energy to store at timestep \textit{t} \\
\\
$HS^{Avail}_{t}$ amount of hydrogen in storage at timestep \textit{t} \\
$BS^{Avail}_{t}$ amount of energy available in battery at timestep \textit{t} \\
\\
$HS^{Deploy}_{t}$ amount of hydrogen to deploy to HB at timestep \textit{t} \\
$BS^{Deploy}_{t}$ amount of energy to release into islanded grid at timestep \textit{t} \\

\end{tabular}






\section*{Optimization Model}


Objective
\begin{align}
\min \quad
& W^{cost} + S^{cost} + EY^{cost} + HS^{cost} + BS^{cost} + ASU^{cost} + HB^{cost}
\end{align}




where
\begin{align}
& W^{cost} = W^{Cap}(c^{W} + \sum_{\substack{t = 0}}^n\frac{o^{W fixed}}{(1+r)^t} )\\
& S^{cost} = S^{Cap}(c^{S} + \sum_{\substack{t = 0}}^n\frac{o^{S fixed}}{(1+r)^t} )\\
& EY^{cost} = \sum_{i \in I^{EY}}(s^{EY}_{i}EY^{Cap}_{i}(c^{EY}_{i} + \sum_{\substack{t = 0}}^n\frac{o^{EY fixed}_{i}}{(1+r)^t} )) + \sum_{\substack{t = 0}}^n\frac{o^{EY variable}_{i}(\sum_{t \in T}EY^{Gen}_{i,t})}{(1+r)^t}\\
& HS^{cost} = e^{HS}HS^{Cap}(c^{HS} + \sum_{\substack{t = 0}}^n\frac{o^{HS fixed}}{(1+r)^t} ))\\
& BS^{cost} = BS^{Cap}(c^{BS} + \sum_{\substack{t = 0}}^n\frac{o^{BS fixed}}{(1+r)^t} ))\\
& ASU^{cost} = e^{ASU}ASU^{Cap}(c^{ASU} + \sum_{\substack{t = 0}}^n\frac{o^{ASU fixed}}{(1+r)^t} ))\\
& HB^{cost} = e^{HB}HB^{Cap}(c^{HB} + \sum_{\substack{t = 0}}^n\frac{o^{HB fixed}}{(1+r)^t} ))
\end{align}

S.t.
\begin{align}
& \sum_{t\in T}HB_{t} = d \\
& E^{Demand}_{t} \leq E^{Gen}_t & \forall t \in T \\
& E^{Demand}_{t} = \sum_{i \in I^{EY}}(e^{EY}_{i}EY^{Gen}_{i,t}) + e^{HS}HS^{Avail}_{t} + \notag\\
& \frac{BS^{Store}_{t}}{\theta^{BSstore}} + e^{ASU}ASU^{Gen}_{t} + e^{HB}HB^{Gen}_{t} &\forall t \in T \\
& E^{Gen}_{t} = \theta^{Wind}_{t}W^{cap}_{t} + \theta^{Solar}_{t}S^{cap}_{t} + BS^{Deploy}_{t} & \forall t \in T
\end{align}


\begin{align}
& BS^{Avail}_{t} = BS^{Avail}_{t-1} + BS^{Store}_{t-1} - \frac{BS^{Deploy}_{t-1}}{\theta^{BSdeploy}} & \forall t \in T,BS^{Avail}_{0} = 0 \\
& BS^{Avail}_{t} \leq BS^{Cap} & \forall t \in T \\
& BS^{Store}_{t} \leq BS^{Cap}-BS^{Avail}_{t} & \forall t \in T \\
&  \frac{BS^{Deploy}_{t}}{\theta^{BSdeploy}} \leq BS^{Avail}_{t} & \forall t \in T
\end{align}

\begin{align}
& HS^{Avail}_{t} = HS^{Avail}_{t-1} + HS^{Store}_{t-1} - \frac{HS^{Deploy}_{t-1}}{\theta^{HSdeploy}} & \forall t \in T,HS^{Avail}_{0} = 0 \\
& HS^{Avail}_{t} \leq HS^{Cap} & \forall t \in T \\
& HS^{Store}_{t} \leq HS^{Cap}-HS^{Avail}_{t} & \forall t \in T \\
&  \frac{HS^{Deploy}_{t}}{\theta^{HSdeploy}} \leq HS^{Avail}_{t} & \forall t \in T \\
& \frac{HS^{Store}_{t}}{\theta^{HSstore}} <= \sum_{i \in I^{EY}}EY^{Gen}_{i,t} & \forall t \in T
\end{align}

\begin{align}
& EY^{Gen}_{i,t} \leq \frac{s^{EY}_{i}}{e^{EY}_{i}}EY^{Cap}_{i} & \forall i,t \in I^{EY},T \\
& ASU^{Gen}_{t} \leq ASU^{Cap} & \forall t \in T \\
& HB^{Gen}_{t} \leq HB^{Cap} & \forall t \in T
\end{align}

\begin{align}
ASU^{Gen}_{t} \geq m^{ASU}ASU^{Cap} & \forall t \in T \\
HB^{Gen}_{t} \geq m^{HB}HB^{Cap} & \forall t \in T
\end{align}

\begin{align}
\frac{1}{\theta^{HBhydrogen}}(\sum_{i \in I^{EY}}EY^{Gen}_{i,t}-\frac{HS^{Store}_{t}}{\theta^{HSstore}} + HS^{Deploy}_{t}) = \frac{HB^{Gen}_{t}}{\theta^{HB}} & \forall t \in T \\
\frac{1}{\theta^{HBnitrogen}}(ASU^{Gen}_{t}) = \frac{HB^{Gen}_{t}}{\theta^{HB}} & \forall t \in T
\end{align}

\begin{align}
& EY^{Cap}_{i} \in Z^{+} \forall i \in I^{EY}
\end{align}

All other variables are non-negative reals unless explicitly stated


\section*{Objective and Constraint Explanations}
\begin{enumerate}
\item Objective: minimize total system operating costs of wind,solar,electroyzer, hydrogen storage, battery storage,air separation units, and ammonia plant (Haber-Bosch process)
\item Wind Costs: CAPEX + fixed operation costs multiplied by total number of time periods + total variable OPEX
\item Solar Costs: CAPEX + fixed operation costs multiplied by total number of time periods + total variable OPEX (similar as wind costs)
\item Electroyzer Costs: size of specific electroyzer stack multiplied by number of stacks to build of that model CAPEX + fixed OPEX + variable electroyzer generation OPEX costs (need to convert generation decision variables (which are in kg) to MW-hence the multiplication by the energy usage value for that variable and the ones below in kg)

\item Hydrogen Storage Costs: Hydrogen storage CAPEX + fixed OPEX + variable OPEX cost by amount of hydrogen being stored

\item Battery Storage Costs: Battery storage CAPEX + fixed OPEX + variable OPEX cost by amount of energy being stored

\item Air Separation Unit Costs: CAPEX for ASU + fixed OPEX + variable OPEX 
\item Ammonia Plant Costs: CAPEX for Ammonia plant + fixed OPEX + variable OPEX 


Constraints

\item Total generation of ammonia over time period must meet demand targets
\item Energy consumed by total process operations must be less than or equal to total energy available at each timestep for simulation

\item Energy demand (sum over all power consuming operations): required energy for total generation of electroyzers + energy required to store x kg of H2 + required energy to store and save in battery storage + energy required for ASU to obtain N2 + energy required for HB process to produce NH3 (assumed respective process efficiencies are encapsulated by their energy usage parameter)
\item Energy available (sum over all power suppliers at each timestep): respective wind and solar generation + battery storage deployment
\item Available power in battery: equal to previous charge + how much you decided to store - how much you deploy and the requirement to deploy for each timestep. Start off with zero charge
\item Battery storage upper bound: Charge of battery must be no more than total capacity of battery
\item Battery storage definition: can only add new charge to battery up to maximum capacity
\item Battery deploy definition: can only deploy enough energy that you have available
\item Hydrogen available definition: equal to previous timestep hydrogen in storage + new hydrogen added to storage - hydrogen deployed and hydrogen to deploy (lost from efficiency)
\item Hydrogen storage upper bound: can not store more than what the tank can hold
\item Hydrogen storage definition: can only store up to max capacity
\item Hydrogen deploy definition: must have enough hydrogen in storage to deploy how much you want including efficiency
\item Hydrogen storage source: You can only store up to how much hydrogen you produce from EY process
\item Total hydrogen upper bound: you can only generate up to max capacity in kg for each module type
\item Nitrogen generation upper bound: can only produce up to Nitrogen capacity
\item Ammonia generation upper bound: can only generate up to max capacity output for Haber-Bosch process
\item Nitrogen generation lower bound: can't fall below a certain production output for nitrogen production
\item Ammonia generation lower bound: can't fall below a certain production output for Ammonia production
\item Hydrogen input for ammonia production: must have stoichmetric balance for hydrogen input for 1 output of ammonia. Hydrogen input is the hydrogen sent directly from electroyzer to plant + any released from storage)
\item Nitrogen input for ammonia production: nitrogen input for ammonia production must meet stoichmetric balance with hydrogen
\item How much EY you build for each model is limited to all real positive integers for each model (all other decision variables are continuous non-negative)
\end{enumerate}



\end{document}
